===============
Installing Spin
===============

This document covers Spin requirements, installation, and getting
started.

Requirements
============

Spin has been tested on systems running Red Hat Enterprise Linux 5,
CentOS 5, and Fedora versions 7, 8 and 9.

The following packages are needed for Spin to run:

* createrepo
* dosfstools
* gnupg
* mkisofs (genisoimage in fedora 8+)
* netpbm-progs
* python-devel
* python-imaging
* python-lxml
* python-setuptools
* rendition-common
* rhn-client-tools
* rpm-build
* spin-logos
* syslinux
* yum

Note: Some of the packages (e.g. python-lxml) can be found in the
Extra Packages for Enterprise Linux (EPEL) or Fedora Everything RPM
repositories.


Installation
============

Spin RPMs will be coming soon.  In the meantime, this document
describes how you can obtain Spin and run it directly from source
code.

In the following instructions, we assume that the working directory is
``SPIN_RUN``.

1. Clone **Spin** source code repositories
------------------------------------------

::

  $$ cd $SPIN_RUN
  $$ hg clone https://www.renditionsoftware.com/hg/public/spin spin
  $$ hg clone https://www.renditionsoftware.com/hg/public/rendition-common rendition-common


In your ``~/.bashrc`` file, add the following line

::

  export PYTHONPATH=$SPIN_RUN/rendition-common:$SPIN_RUN/spin:$PYTHONPATH


and then at the command line

::

  $$ source ~/.bashrc


2. Create the Spin configuration file
-------------------------------------

Create a file called ``/etc/spin/spin.conf`` and add the following
lines:

::

  <spin>
    <share-path>$SPIN_RUN/spin/share/spin</share-path>
    <disable-module>logos-rpm</disable-module> <!--temporary workaround-->
  </spin>

Alternatively, you can copy ``$SPIN_RUN/spin/share/doc/examples/spin.conf``
to the /etc folder as a starting point and modify the share-path.

3. Install Spin dependencies
----------------------------

Install packages listed above under `Requirements`. Note that yum must
be run as the root user.

::

  $$ yum install (dependencies listed above)


Getting Started
===============

1. Create an Appliance Definition File (.appliance)
--------------------------------------------------

Spin includes some example files to help you get started. Copy these
files to a new folder, called ``APPLIANCE_DIR`` below.  While you are
experimenting, you will most likely want APPLIANCE_DIR to be in your
home folder. Later you will want to maintain your .appliance and
related files using a Source Code Management system such as CVS,
Subversion, Mercurial or Git.

::

  $$ mkdir $APPLIANCE_DIR
  $$ cd $SPIN_RUN/spin/share/doc/example/
  $$ cp fedora.appliance centos.appliance example.appliance $APPLIANCE_DIR
  $$ cd $APPLIANCE_DIR


Now you can open and modify the fedora.appliance and centos.appliance
files.

Appliance definition files (.appliance files) define your appliance,
including name, version, packages to include, and package repositories
to use (e.g.  CentOS 5, Fedora 9), etc. The fedora.appliance and
centos.appliance files are abbreviated appliance files showing common
options.  Example.appliance is a commented appliance file containing
an overview of general concepts, and descriptions of many elements and
their usage.

2. Running Spin
---------------

To run Spin, type the following at the command line. Note that Spin
must be run as the root system user; this is required because Spin
mounts and modifies installation images.

::

  $SPIN_RUN/bin/spin $APPLIANCE_DIR/centos.appliance


3. Using the Appliance
----------------------

Your new appliance can be found at ``/var/www/html/appliances``.


4. Questions/Comments/Issues
----------------------------

Send email to ``spin@renditionsoftware.com``.

