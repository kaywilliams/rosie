<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
                         "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">

<!-- See http://www.docbook.org/tdg/en/html/refentry.html for more documentation -->
<!--Repo Studio Command reference -->

<refentry id="command.repostudio">
<refentryinfo>
<date>2012-09-10</date>
</refentryinfo>

<refmeta>
<refentrytitle>RepoStudio Commands</refentrytitle>
<manvolnum>1</manvolnum>
<refmiscinfo>Repo Studio</refmiscinfo>
</refmeta>

<refnamediv>
<refname>repostudio</refname>
<refpurpose>creates RPM package repositories for use with CentOS and Red Hat Enterprise Linux.</refpurpose>
</refnamediv>

<refsynopsisdiv>
<refsynopsisdivinfo>
<date>2012-04-18</date>
</refsynopsisdivinfo>

<cmdsynopsis>
<command>repostudio</command>
<arg choice="opt">
<option>[-c | --config ] <replaceable class="parameter">PATH</replaceable></option>
</arg>
<arg choice="opt">
<option>--macro <replaceable class="parameter">ID:VALUE</replaceable></option>

</arg>
<arg choice="opt">
<option>--no-validate </option>
</arg>
<arg choice="opt">
<option>--validate-only </option>
</arg>
<arg choice="opt">
<option>[-l | --log-level ] <replaceable class="parameter">N</replaceable></option>
</arg>
<arg choice="opt">
<option>--log-file <replaceable class="parameter">PATH</replaceable></option>
</arg>
<arg choice="opt">
<option>--lib-path <replaceable class="parameter">PATH</replaceable></option>
</arg>
<arg choice="opt">
<option>--share-path <replaceable class="parameter">PATH</replaceable></option>
</arg>
<arg choice="opt">
<option>--force <replaceable class="parameter">MODULE</replaceable></option>
</arg>
<arg choice="opt">
<option>--skip <replaceable class="parameter">MODULE</replaceable></option>
</arg>
<filename> DEFINITION</filename>

</cmdsynopsis>
</refsynopsisdiv>

<refsect1 id="repostudio.1-description"><title>DESCRIPTION</title>
<para>Builds and maintains the repository defined in the file at
DEFINITION.</para>
</refsect1>

<refsect1 id="repostudio.1-usage"><title>USAGE</title>
<para><command>repostudio</command> [OPTIONS] DEFINITION</para>
<para>OPTIONS refers to the command-line options described below.
DEFINITION refers to a repository definition file, see the Repository
Definition File Reference at <ulink
url="http://www.repostudio.org/repostudio/documentation"/> for more
information.</para>
</refsect1>


<refsect1 id="repostudio.1-options"><title>OPTIONS</title>
<para>Command options are listed in alphabetical order.</para>
<variablelist>

<varlistentry>
  <term><option>-c; --config <replaceable class="parameter">CENTOSSTUDIO_CONF</replaceable></option></term>
  <listitem>
    <para> Specifies the directory and filename <replaceable
    class="parameter">CENTOSSTUDIO_CONF</replaceable> of the repostudio
    configuration file.  The default value is <filename
    class="directory">/etc/repostudio/repostudio.conf</filename>.  See the
    <filename>repostudio.conf(5)</filename> man page for Repo Studio
    configuration options.</para>

  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--force <replaceable class="parameter">MODULE</replaceable></option></term>
  <listitem>
        <para>Forces a Repo Studio <replaceable
        class="parameter">MODULE</replaceable> to execute, even if the module
        would ordinarily be skipped for optimizations in speed. Forcing a
        module forces its children recursively. This option can be specified
        more than once, as in the example below:</para>

<para>--force <replaceable class="parameter">MODULE1</replaceable> --force
<replaceable class="parameter">MODULE2</replaceable> --force <replaceable
class="parameter">MODULE3</replaceable></para>
<para>See the MODULES section below for more information.</para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--lib-path <replaceable class="parameter">PATH</replaceable></option></term>
  <listitem>
    <para>By default, Repo Studio searches directories listed on the system
    path to locate Repo Studio modules.  The --lib-path option allows
    specifing additional directory <replaceable
    class="parameter">PATHs</replaceable> to search.  This option can be
    specified more than once; for example:</para>
<para>--lib-path <replaceable class="parameter">PATH1</replaceable> --lib-path
<replaceable class="parameter">PATH2</replaceable> --lib-path <replaceable
class="parameter">PATH3</replaceable></para>
<para>See the MODULES section below for more information.</para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--log-file <replaceable class="parameter">PATH</replaceable></option></term>
  <listitem>
    <para>
    Specifies the directory and filename <replaceable
    class="parameter">PATH</replaceable> to which Repo Studio writes logging
    information.  The default path is
    <filename>/var/log/repostudio.log</filename>.  See also the command option
    <command>--log-level</command>.
    </para>
    <para>
    --log-file <replaceable class="parameter">PATH</replaceable>
    </para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>-l; --log-level <replaceable class="parameter">N</replaceable></option></term>
  <listitem>
    <para>
    Specifies the level of detail displayed on the console during a
    build.  There are six levels <replaceable class="parameter">N</replaceable>
    (0 to 5) with Level 3 being Repo Studio's default level.
    </para>
<para>LEVELS
<programlisting>
* Level 0: Displays errors only.
* Level 1: Displays build status.
* Level 2: Displays module status. See MODULES.
* Level 3: Displays file download and creation status (default).
* Level 4: Displays script output; file copy and delete status. 
* Level 5: Displays complete debug-level status.
</programlisting>
</para>
<para>Setting the log level to 0 will prevent all logging except errors to the
screen, while levels 1 to 5 have increasingly more detail about the build
process.
</para>
<para>This setting controls the level of detail displayed on the console only,
and not the log file. Level 5 detail is always written to the log file.
</para>
</listitem>
</varlistentry>

<varlistentry>
  <term><option>--macro</option></term>
  <listitem>
    <para>Specifies a macro <replaceable class="parameter">ID</replaceable> and
    <replaceable class="parameter">VALUE</replaceable> to use for placeholder
    substitution in the DEFINITION. <replaceable
    class="parameter">ID</replaceable> and <replaceable
    class="parameter">VALUE</replaceable> are text values separated by a colon.
    Specifically, <replaceable class="parameter">VALUE</replaceable> may not
    contain XML. Placeholders in the DEFINITION take the form '%{<replaceable
    class="parameter">ID</replaceable>}'. This option may be specified more
    than once, for example: 
    </para>
    <para>--macro <replaceable class="parameter">ID1:VALUE1</replaceable>
    --macro <replaceable class="parameter">ID2:VALUE2</replaceable> --macro
    <replaceable class="parameter">ID3:VALUE3</replaceable>
    </para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--no-validate</option></term>
  <listitem>
    <para>Disables validation of CENTOSSTUDIO_CONF and DEFINITION during the build process.</para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--share-path <replaceable class="parameter">PATH</replaceable></option></term>
  <listitem>
    <para> Specifies a directory <replaceable
    class="parameter">PATH</replaceable> where Repo Studio can locate shared
    program data such as example files and XML schema files. The default path is
    <filename>/usr/share/repostudio/</filename>. This option can be specified
    more than once, as demonstrated below:</para>

<para>--share-path <replaceable class="parameter">PATH1</replaceable>
--share-path <replaceable class="parameter">PATH2</replaceable> --share-path
<replaceable class="parameter">PATH3</replaceable></para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--skip <replaceable class="parameter">MODULE</replaceable></option></term>
  <listitem>
        <para>Prevents a <replaceable class="parameter">MODULE</replaceable>
        from executing, even if the module would ordinarily be executed due to
        changes in input, output or other factors. Skipping a module skips its
        children recursively. This option can be specified more than once, as
        in the example below:</para>
<para>--skip <replaceable class="parameter">MODULE1</replaceable> --skip
<replaceable class="parameter">MODULE2</replaceable> --skip <replaceable
class="parameter">MODULE3</replaceable></para>
<para>See the MODULES section below for more information.</para>
  </listitem>
</varlistentry>

<varlistentry>
  <term><option>--validate-only</option></term>
  <listitem>
<para>Performs CENTOSSTUDIO_CONF and DEFINITION validation only; it
does not build the repository.  The option also displays the complete
DEFINITION file after resolving macro and include elements.</para>
  </listitem>
</varlistentry>

</variablelist>
</refsect1>

<refsect1 id="repostudio.1-variables"><title>VARIABLES</title>
<para>Repo Studio command options, where indicated, use three variables:
MODULE, PATH and CENTOSSTUDIO_CONF.</para>

<variablelist>
<varlistentry>
  <term>MODULE</term>
  <listitem>
        <para>The id of a Repo Studio module.  See the MODULES section,
        below, for more information.</para>
  </listitem>
</varlistentry>

<varlistentry>
  <term>PATH</term>
  <listitem>
    <para> A local file path.  Repo Studio resolves paths relative to the
    current working directory.</para>
  </listitem>
</varlistentry>

<varlistentry>
  <term>CENTOSSTUDIO_CONF</term>
  <listitem>
    <para>The directory and filename of the Repo Studio configuration file.</para>
  </listitem>
</varlistentry>
</variablelist>
</refsect1>

<refsect1 id="repostudio.1-modules"><title>MODULES</title>
<para>
A module performs an individual step in the build process, such as
downloading software packages, creating packages or creating ISO images. 
On subsequent builds of the same repository, Repo Studio automatically
determines whether a module can be skipped in favor of using cached data from a
previous build. Users can override the default determination using the
<command>--skip</command> and <command>--force</command> options.
</para>
<para>
Module names correspond to top-level elements in the DEFINITION.
</para>
<para>
Developers can write custom Repo Studio modules and direct Repo
Studio to use them via the <command>--lib-path</command> repostudio command
option.
</para>
</refsect1>

<refsect1 id="repostudio.1-bugs"><title>BUGS</title>
<para>See the web site at <ulink
url="http://www.repostudio.org/repostudio"/> for contact and support
information.</para>
</refsect1>

<refsect1 id="repostudio.1-files"><title>FILES</title>
<para><simplelist type="inline">
<member><ulink url="file:///usr/share/repostudio/">/usr/share/repostudio/</ulink></member>
<member><ulink url="file:///usr/bin/repostudio">/usr/bin/repostudio</ulink></member>
<member><ulink url="file:///etc/repostudio/repostudio.conf">/etc/repostudio/repostudio.conf</ulink></member>
<member><ulink url="file:///var/log/repostudio.log">/var/log/repostudio.log</ulink></member>
<member><ulink url="file:///var/cache/repostudio/">/var/cache/repostudio/</ulink></member>
<member><ulink url="file:///var/lib/repostudio/">/var/lib/repostudio/</ulink></member>
</simplelist></para>
</refsect1>

<refsect1 id="repostudio.1-see_also"><title>SEE ALSO</title>
<para><simplelist type="inline">
<member>repostudio.conf(5)</member>
<member><ulink url="http://www.repostudio.org/repostudio"/></member>

</simplelist></para>
</refsect1>

<refsect1 id="repostudio.1-author"><title>AUTHOR</title>
<para><author><othername>Repo Studio Project</othername>
<contrib>Original author</contrib>
</author></para>
</refsect1>

</refentry>
