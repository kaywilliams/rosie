<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<section id="configuring-a-build-machine" xreflabel="Configuring a Build Machine">
  <title>Configuring a Build Machine</title>

  <para>
  <application class='software'>CentOS Studio</application> installation
  requires a machine running CentOS or Red Hat Enterprise Linux (RHEL)
  version 6 for the x86_64 architecture. <application class="software">CentOS
  Studio</application> is designed to work in a networked environment.
  </para>

  <para>
  Recent advances in virtualization, including the introduction of a
  Kernel-based Virtual Machine system (KVM), have made it both easy and
  compelling to use virtual machines for testing client installation and
  updates. For this reason, we recommend installing CentOS Studio on a machine
  with one of the following architectures:
  </para>

  <itemizedlist>
    <listitem>an Intel processor with the Intel VT and the Intel 64 extensions, or</listitem>
    <listitem>an AMD processor with the AMD-V and AMD64 extensions.</listitem>
  </itemizedlist>

  <para>This document will focus on using virtual machines a primary method
  for testing client installations and updates.</para>

  <para>For capacity planning purposes, the machine should have a separate
  logical or physical drive for the <filename
  class="directory">/var</filename> directory. <application
  class="software">CentOS Studio</application> uses the <filename
  class="directory">/var/cache/centosstudio</filename> folder for caching 
  repository content and the <filename 
  class="directory">/var/www/html/repos</filename> folder for storing
  completed repositories. The recommended minimum drive space allocated for
  each of these folders is 15GB (30GB total). Depending on the number and size
  of repositories created, you may need more disk space.</para>

  <para>Disk access is another consideration. Due to the size of the files
  handled, fast disk access is preferable. To accommodate the speed
  requirements, it is best to use hard disk drives with Serial Advanced
  Technology Attachment (SATA) interfaces.</para>

  <para>
  To install CentOS Studio, follow the instructions on the download page at
  <ulink
  url="http://www.centossolutions.com/centosstudio">http://www.centossolutions.com/centosstudio</ulink>.
  </para>

  <para>
  To install and configure support for testing client machines using KVM-based
  virtual machines (recommended), complete these additional steps as the root
  user. Note the OS and system requirements specified earlier in this section.
  </para>

  <para>First, install the kvm package group.</para>

  <para><informalexample><programlisting>
# # CentOS 5
# yum groupinstall kvm

# # CentOS 6
# yum groupinstall virtualization virtualization-platform virtualization-client 
  </programlisting></informalexample></para>

  <para>Next, using a text editor, modify
  <filename>/etc/libvirt/qemu/networks/default.xml</filename> to add
  &lt;forward mode='nat'/&gt; at the same level as &lt;bridge
  name='virbr0'/&gt;, for example:</para>

  <para><informalexample><programlisting>
&lt;network&gt;
...
  &lt;forward mode='nat'/&gt; &lt;!-- or &lt;forward/&gt; --&gt;
  &lt;bridge name='virbr0'/&gt;
...
&lt;/network&gt;
  </programlisting></informalexample></para>

  <para>Finally, restart your system.</para>

  <para><informalexample><programlisting>
# reboot 
  </programlisting></informalexample></para>

  <para>Now you are ready to begin defining your repository!</para>
</section>
