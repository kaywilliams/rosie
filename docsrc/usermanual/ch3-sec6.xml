<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<section>
  <title>Building a Repository</title>

  <para>Now that you have defined your solution, you use the
  <command>centosstudio</command> command to build it. Running CentOS Studio
  validates the solution definition syntax, creates the solution, and records
  process results. The default level of screen output includes errors, build
  status and file download and creation status. CentOS Studio also sends this
  output to the log file, by default
  <filename>/var/log/centosstudio.log</filename>. If a critical error occurs,
  CentOS Studio includes detailed error information in the log file.</para>

  <para>The initial build of a solution can be time consuming, on the order of
  several minutes to an hour or more, depending on the location of package
  repositories (local or remote), network connection speed, the number of
  packages included in the solution, and the amount of content that can be
  reused from the CentOS Studio shared cache. Subsequent builds complete in
  much less time, often 1-2 minutes, depending on the level and type of change
  since the previous build.</para>

  <para>To build the samba-server solution we have been defining, enter the
  command below:</para> 

  <para><informalexample>
      <programlisting>#centosstudio samba-server.definition</programlisting>
    </informalexample></para>

  <para>The output for an initial run details all the steps
  for downloading packages, checking package dependencies and creating
  images. If there are any errors, <application
  class="software">CentOS Studio</application> notes those and, in many cases,
  halts the process.</para>

  <para>
  When the process is complete, you can locate your new solution at
  <filename>/var/www/html/repositories/samba-server-5-i386</filename>. You will
  also notice that CentOS Studio has created a new file
  <filename>samba-server.definition.dat</filename> in the same location as you
  solution definition. Take care not to delete this file as it contains
  important revision information for your solution. It will be discussed in
  more detail in the next section <xref linkend="configuring-repositories"/>
  </para>

  <note>If your solution uses RHN channels as repositories, CentOS Studio may occasionally report errors such as the following while downloading or verifying repository metadata:

  <programlisting>[repos] long int too large to convert to int</programlisting> 

This can happen when CentOS Studio receives invalid data from RHN. (Typically this occurs when data is being replicated across RHN servers). The error may be corrected by running CentOS Studio again, either immediately or after waiting several minutes.</note>

</section>
