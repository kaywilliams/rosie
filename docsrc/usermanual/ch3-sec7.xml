<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<section id="updating-a-client-machine" xreflabel="Updating a Client Machine">
  <title>Updating a Client Machine</title>

  <para>If there are changes to the system repository, you will
  need to update installed client machines using the <xref linkend="yum-sync-plugin"/>. For this example build, log on to the client machine 
  as the root user and execute the following commands:</para>

  <para><informalexample><programlisting>
# yum clean metadata
# yum sync
  </programlisting></informalexample></para>

  <para>The first command, <userinput>yum clean metadata</userinput>, ensures that YUM is using current repository information. For improved performance, YUM caches repository metadata as a matter of course, with a default cache expiration period of 1.5 hours. While you are building and testing a new system repository, you will want to override this behavior by forcing YUM to clean the metadata cache prior to each execution of the <command>yum sync</command> command. See the <emphasis>metadata_expire</emphasis> option in <command>man yum.conf</command>, as well as <command>man yum</command> for more information on YUM's caching and cleaning options.</para>

  <para>The second command, <userinput>yum sync</userinput>, will update all packages on the client machine from the system repository
  repository, including the system-specific <xref linkend="configuration-package"/>
  created during the build process. The <emphasis>sync</emphasis> command is provided by the  
  YUM Sync Plugin, which is included in the configuration package by default.</para>

  <para>To see what packages changed on the client machine, check the
  <filename>yum.log</filename> file in the <filename
  class="directory">/var/log/</filename> directory.</para>

  <para>For the samba-server example, you should see that a new version of the samba-server-config package is installed, the prior version of the samba-server-config package is removed, and a number packages from the admin-tools group, including system-config-network and system-config-users, are removed. You can verify that the <filename>smb.conf</filename> has been updated by typing <command>cat /etc/samba/smb.conf</command> at the command line and ensuring the workgroup is now set to "MYCOMPANY" rather than "WORKGROUP".</para>

</section>
