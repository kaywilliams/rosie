<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<section>
  <title>Tying it All Together</title>

  <para>In summary, there are several steps to creating a successful
  system distribution.</para>

  <para>First, you configure the <application
  class="software">SystemStudio</application> build machine to accommodate the
  size and number of system distributions you will build and store concurrently.
  The system should be accessible through your local network.
  After configuring the hardware, you can install one of the <application
  class="software">Linux </application>operating system versions on which 
  <application class="software">SystemStudio</application> runs.</para>

  <para>Then you define your system distribution in the <filename
  class="extension">samba-server.definition</filename> file using XML tags
  defined in the DDFR. Your definition includes several key pieces of
  information:</para>

  <para><itemizedlist>
      <listitem>
        <para>the name of the system distribution, its version and architecture;</para>
      </listitem>

      <listitem>
        <para>the repositories for the operating system and application packages, including
        base install and update mirror locations;</para>
      </listitem>

      <listitem>
        <para>the package groups and packages to include and any packages to 
        exclude; and</para>
      </listitem>

      <listitem>
        <para>system configuration files and scripts.</para>
      </listitem>
    </itemizedlist></para>

  <para>Once the system distribution definition is complete, you log on as the root user
  and execute the command <userinput>systemstudio samba-server.definition</userinput>
  to build the system distribution. Output goes to the screen and the default log file.
  The first build may take some time, since <application
  class="software">SystemStudio</application> needs to do everything from 
  scratch:</para>

  <para><itemizedlist>
      <listitem>file:///usr/share/doc/HTML/index.html
        <para>validate the <filename
        class="extension">samba-server.definition</filename> file,</para>
      </listitem>

      <listitem>
        <para>locate input repositories,</para>
      </listitem>

      <listitem>
        <para>create the configuration package,</para>
      </listitem>

      <listitem>
        <para>resolve package dependencies,</para>
      </listitem>

      <listitem>
        <para>download packages from input repositories,</para>
      </listitem>

      <listitem>
        <para>create the system distribution repository (and it's metadata),</para>
      </listitem>

      <listitem>
        <para>create network installation images, and</para>
      </listitem>

      <listitem>
        <para>copy, or <emphasis>publish</emphasis>, system distribution content to a web-accessible location.</para>
      </listitem>
    </itemizedlist>Deploying client machines requires two steps. First, you 
  create the CD or DVD boot media. And then you install the client machine by
  inserting the disk into the client machine and later verifying that the 
  contents are correct. Alternatively, you can use virt-manager or virt-install
  to deploy new virtual machines based on the system distribution.</para>

  <para>Updating your system distribution can involve simply checking for mirror 
  repository updates. Or it can involve changing the system distribution definition or
  configuration files and scripts. Depending upon the changes it encounters, 
  <application class="software">SystemStudio</application> will 
  update the system distribution as necessary. After updating the
  system distribution, you will need to run <userinput>yum sync</userinput> on client
  machines to keep them up to date with the current system distribution.</para>

  <para>In the Samba CentOS 5 Server example presented here, what you have
  in the end is a system distribution for a Samba server on CentOS 5 for the i386
  architecture. Your <filename>smb.conf</filename> file provides custom <application
  class="software">Samba</application> configuration instructions. The
  packages come from the repositories at <ulink
  url="http://mirror.centos.org">http://mirror.centos.org</ulink> .</para>

  <para>Now that you have your definition, you can prepare it for use in a
  production environment. The next chapter explains this process.</para>
</section>
