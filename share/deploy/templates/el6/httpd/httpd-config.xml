<?xml version="1.0" encoding="UTF-8"?>
<config-rpm id='httpd-config'>
<!-- http -->
<requires>httpd</requires>
<requires>mod_ssl</requires>
<requires>/sbin/pidof</requires>

<!-- for use with iptables-update -->
<include href='%{templates-dir}/%{norm-os}/iptables/iptables-update-client.xml'
         xpath='./*'/>
<files destname='%{rpm-id}' destdir='/etc/sysconfig/iptables-update.d'
       content='text'>
-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT
</files>

<script type = 'post'>
# Start web server and configure to start at system boot
if [[ -z `pidof httpd` ]] ; then
  service httpd start > /dev/null
fi
chkconfig --level 345 httpd on
</script>
</config-rpm>
