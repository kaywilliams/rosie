<?xml version="1.0" encoding="utf-8"?>
<script id='install' type='install'>
<macro id='ram'>1024</macro>
<macro id='graphics'>vnc</macro>
<macro id='file-size'>8</macro>
<macro id='image-format'>raw</macro>
#!/bin/bash
set -e

%{source-guestname}

# install machine
virt-install \
  --name $guestname \
  --arch %{arch} \
  --ram %{ram} \
  --graphics %{graphics} \
  --disk path=/var/lib/libvirt/images/$guestname.img,size=%{file-size},format=%{image-format} \
  --network network=deploy \
  --location %{webroot} \
  --extra-args "%{boot-options} ks=%{webroot}/ks.cfg" \
  --force \
  --wait=-1 \
  --noreboot
</script>
