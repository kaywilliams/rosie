<?xml version="1.0" encoding="UTF-8"?>
<config-rpm id='windows-azure-cli-config'>

<macro id='azure-publish-settings'>%{definition-dir}/azure.publishsettings</macro>

<include href="%{templates-dir}/%{norm-os}/common/repos.xml"
         xpath="./repo[@id='epel']"/>

<requires>nodejs</requires>
<requires>npm</requires>
<requires>python-simplejson</requires>

<files destname='azure.publishsettings'>%{azure-publish-settings}</files>
<script type='post'>
npm install azure-cli -g
azure account import %{install-dir}/files/azure.publishsettings >/dev/null
</script>

<script type='preun'>
[[ $1 = 0 ]] &amp;&amp; azure account clear >/dev/null || :
</script>
</config-rpm>
