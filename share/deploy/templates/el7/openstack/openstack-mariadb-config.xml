<?xml version="1.0" encoding="UTF-8"?>
<config-rpm id='openstack-mariadb-config' 
            xmlns:xi="http://www.w3.org/2001/XInclude">
<xi:include href="%{templates-dir}/%{norm-os}/mariadb/mariadb-server-config.xml"
            xpointer="xpointer(./*)"/>
<requires>MySQL-python</requires>
<files destdir="/usr/sbin" destname="mariadb-change-user-password" mode="755"
       content="text">
#!/bin/sh
#
# Changes password for an existing user
#
# Usage:
# mariadb-change-user-password ADMIN_PASSWORD USER USER_PASSWORD

adminpass=$1
user=$2
userpass=$3

# update password
mariadb -p$adminpass &lt;&lt;EOF >/dev/null 
set password for '$user'@'localhost' = password('$userpass');
set password for '$user'@'%' = password('$userpass');
EOF
</files>
</config-rpm>
