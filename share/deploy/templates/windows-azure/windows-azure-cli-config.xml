<?xml version="1.0" encoding="UTF-8"?>
<config-rpm id='windows-azure-cli-config' xmlns:xi="http://www.w3.org/2001/XInclude">

<macro id='azure-publish-settings'>%{definition-dir}/azure.publishsettings</macro>

<xi:include href="%{templates-dir}/common/repos.xml"
            xpointer="xpointer(./repo[@id='epel'])"/>

<requires>nodejs</requires>
<requires>npm</requires>
<requires>python-simplejson</requires>

<files destname='azure.publishsettings'>%{azure-publish-settings}</files>
<script type='post'>
npm install azure-cli -g
azure account import %{installdir}/files/azure.publishsettings >/dev/null
</script>

<script type='preun'>
[[ $1 = 0 ]] &amp;&amp; azure account clear >/dev/null || :
</script>
</config-rpm>
