from spin.locals import LocalsDict, REMOVE

__all__ = ['L_LOGOS_RPM_FILES', 'L_LOGOS_RPM_INFO']

L_LOGOS_RPM_FILES = LocalsDict({
  "anaconda-0": {
    '/usr/share/apps/kdm/themes/Spin/background.png' : dict(
    ),
    '/usr/share/apps/kdm/themes/Spin/innerbackground.png': dict(
    ),
    '/usr/share/apps/kdm/themes/Spin/screenshot.png': dict(
    ),
    '/usr/share/backgrounds/spin/default.jpg': dict(
    ),
    '/usr/share/backgrounds/spin/default-5_4.jpg': dict(
    ),
    '/usr/share/backgrounds/spin/default-dual.jpg': dict(
    ),
    '/usr/share/backgrounds/spin/default-dual-wide.jpg': dict(
    ),
    '/usr/share/backgrounds/spin/default-dual.jpg': dict(
    ),
    '/usr/share/gdm/themes/Spin/background.png': dict(
    ),
    '/usr/share/gdm/themes/Spin/innerbackground.png': dict(
    ),
    '/usr/share/gdm/themes/Spin/screenshot.png': dict(
    ),
    '/usr/share/gnome-screensaver/lock-dialog-system.png': dict(
    ),
    '/usr/lib/anaconda-runtime/boot/syslinux-splash.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (500, 360),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (540, 375),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (320, 470),
        )
      ]
    ),
    '/usr/share/anaconda/pixmaps/syslinux-splash.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (500, 360),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (540, 375),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (320, 470),
        )
      ]
    ),
    '/usr/share/anaconda/pixmaps/anaconda_header.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 18,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (380, 38),
          text_max_width = 700
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (720, 65),
        )
      ]
    ),
    '/usr/share/anaconda/pixmaps/progress_first-lowres.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (250, 165),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (270, 180),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (175, 215),
        )
      ]
    ),
    '/usr/share/anaconda/pixmaps/progress_first.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 18,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (380, 265),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (420, 280),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (250, 315),
        )
      ]
    ),
    '/usr/share/anaconda/pixmaps/rnotes/welcome.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 18,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (380, 265),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (420, 280),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (250, 315),
        )
      ]
    ),
    '/usr/share/anaconda/pixmaps/splash.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 18,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (380, 265),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (420, 280),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (250, 315),
        )
      ]
    ),
    '/usr/share/apps/ksplash/Themes/Spin/Preview.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (269, 252),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (289, 267),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (200, 322),
        )
      ]
    ),
    '/usr/share/apps/ksplash/Themes/Spin/splash_active_bar.png': dict(
    ),
    '/usr/share/apps/ksplash/Themes/Spin/splash_bottom.png': dict(
    ),
    '/usr/share/apps/ksplash/Themes/Spin/splash_inactive_bar.png': dict(
    ),
    '/usr/share/apps/ksplash/Themes/Spin/splash_top.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (270, 188),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (290, 203),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (200, 238),
        )
      ]
    ),
    '/usr/share/firstboot/pixmaps/firstboot-left.png': dict(
    ),
    '/usr/share/firstboot/pixmaps/splash-small.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (254, 179),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (274, 194),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (182, 249),
        )
      ]
    ),
    '/usr/share/pixmaps/poweredby.png': dict(
    ),
    '/usr/share/pixmaps/splash/gnome-splash.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (300, 213),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (320, 238),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (210, 283),
        )
      ]
    ),
    '/usr/share/rhgb/main-logo.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (659, 299),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (679, 319),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (400, 389),
        )
      ]
    ),
    '/boot/grub/grub-splash.png': dict(
      strings = [
        dict(
          text = '%(fullname)s',
          font = 'DejaVuLGCSans-Bold.ttf',
          font_size = 14,
          font_size_min = 9,
          font_color = 'white',
          text_coords = (450, 360),
          text_max_width = 140,
        ),
        dict(
          text = 'Version %(version)s',
          halign = 'right',
          font_size = 9,
          font_color = 'white',
          text_coords = (490, 375),
        ),
        dict(
          text = '%(copyright)s',
          font_size = 9,
          font_color = '#9d9d9d',
          text_coords = (320, 470),
        )
      ]
    ),
  },
  "anaconda-11.2.0.66-1": {
    '/usr/lib/anaconda-runtime/syslinux-vesa-splash.jpg': dict(
      format='JPEG',
    ),
  },
  "anaconda-11.3.0.36-1": {
    '/usr/lib/anaconda-runtime/syslinux-vesa-splash.jpg': dict(
      format='PNG'
    ),
  },
})

DEFAULT_INFO = {
  'folder': 'r5',
  'start_color': (120, 30, 29),
  'end_color': (88, 23, 21),
  'triggerin': {
    'gdm': '''CUSTOM_CONF=%%{_sysconfdir}/gdm/custom.conf
THEME_CONF=/usr/share/%(rpm_name)s/custom.conf
%%{__mv} -f $CUSTOM_CONF $CUSTOM_CONF.rpmsave
%%{__cp} $THEME_CONF $CUSTOM_CONF
''',
    'desktop-backgrounds-basic': '''BACKGROUNDS=/usr/share/backgrounds
DEFAULTS="default-5_4.jpg default-dual.jpg default-dual-wide.jpg default.jpg default-wide.jpg"
for default in $DEFAULTS; do
  file=$BACKGROUNDS/images/$default
  if [ -e $file ]; then
    %%{__mv} $file $file.rpmsave
    %%{__ln_s} $BACKGROUNDS/spin/$default $file
  fi
done
''',
  },
  'triggerun': {
    'gdm': '''CUSTOM_CONF=%%{_sysconfdir}/gdm/custom.conf
if [ "$2" -eq "0" -o "$1" -eq "0" ]; then
  %%{__rm} -f $CUSTOM_CONF.rpmsave
fi
''',
    'desktop-backgrounds-basic': '''BACKGROUNDS=/usr/share/backgrounds
if [ "$2" -eq "0" -o "$1" -eq "0" ]; then
  for default in `ls -1 $BACKGROUNDS/images/default* | grep -v "rpmsave"`; do
    %%{__rm} -f $default
    %%{__mv} -f $default.rpmsave $default
  done
fi
''',
  },
}

L_LOGOS_RPM_INFO = {
  'Fedora': LocalsDict({
    '0': DEFAULT_INFO,
    '7': {
      'folder': 'f7',
      'start_color': (0, 27, 82),
      'end_color': (28, 41, 89),
    },
    '8': {
      'folder': 'f8',
      'start_color': (32, 75, 105),
      'end_color': (70, 110, 146),
      'post-install': '''SPIN_BACKGROUNDS="1-spin-sunrise.png 2-spin-day.png 3-spin-sunset.png 4-spin-night.png"
DEFAULT=/usr/share/backgrounds/spin/default.jpg
for file in $SPIN_BACKGROUNDS; do
  %{__ln_s} $DEFAULT /usr/share/backgrounds/spin/$file
done
''',
      'post-uninstall': '''SPIN_BACKGROUNDS="1-spin-sunrise.png 2-spin-day.png 3-spin-sunset.png 4-spin-night.png"
for file in $SPIN_BACKGROUNDS; do
  %{__rm} -f /usr/share/backgrounds/spin/$file
done
''',
      'triggerin': {
        'desktop-backgrounds-basic': '''BACKGROUNDS=/usr/share/backgrounds
DEFAULTS="default-5_4.jpg default-dual.jpg default-dual-wide.jpg default.jpg default-wide.jpg"
for default in $DEFAULTS; do
  file=$BACKGROUNDS/images/$default
  if [ -e $file ]; then
    %%{__mv} $file $file.rpmsave
    %%{__ln_s} $BACKGROUNDS/spin/$default $file
  fi
done
if [ -e $BACKGROUNDS/infinity ]; then
  %%{__mv} $BACKGROUNDS/infinity $BACKGROUNDS/infinity.rpmsave,
  %%{__ln_s} $BACKGROUNDS/spin $BACKGROUNDS/infinity
  if [ ! -e $BACKGROUNDS/spin/infinity.xml ]; then
    %%{__ln_s} $BACKGROUNDS/spin/spin.xml $BACKGROUNDS/spin/infinity.xml
  fi
fi
'''
      },
      'triggerun': {
        'desktop-backgrounds-basic': '''BACKGROUNDS=/usr/share/backgrounds
if [ "$2" -eq "0" -o "$1" -eq "0" ]; then
  for default in `ls -1 $BACKGROUNDS/images/default* | grep -v "rpmsave"`; do
    %%{__rm} -f $default
    %%{__mv} -f $default.rpmsave $default
  done
  %%{__rm} -rf $BACKGROUNDS/infinity
  %%{__mv} -f $BACKGROUNDS/infinity.rpmsave $BACKGROUNDS/infinity
  %%{__rm} -f $BACKGROUNDS/spin/infinity.xml
fi
''',
      },
    },
    '9': {
      ## UPDATEME
      'folder': 'f8',
      'start_color': (32, 75, 105),
      'end_color': (70, 110, 146),
      'triggerin': {
        'desktop-backgrounds-basic': '''BACKGROUNDS=/usr/share/backgrounds
DEFAULTS="default-5_4.jpg default-dual.jpg default-dual-wide.jpg default.jpg default-wide.jpg"
for default in $DEFAULTS; do
  file=$BACKGROUNDS/images/$default
  if [ -e $file ]; then
    %%{__mv} $file $file.rpmsave
    %%{__ln_s} $BACKGROUNDS/spin/$default $file
  fi
done
if [ -e $BACKGROUNDS/waves ]; then
  %%{__mv} $BACKGROUNDS/waves $BACKGROUNDS/waves.rpmsave,
  %%{__ln_s} $BACKGROUNDS/spin $BACKGROUNDS/waves
  if [ ! -e $BACKGROUNDS/spin/waves.xml ]; then
    %%{__ln_s} $BACKGROUNDS/spin/spin.xml $BACKGROUNDS/spin/waves.xml
  fi
fi
'''
      },
      'triggerun': {
        'desktop-backgrounds-basic': '''BACKGROUNDS=/usr/share/backgrounds
if [ "$2" -eq "0" -o "$1" -eq "0" ]; then
  for default in `ls -1 $BACKGROUNDS/images/default* | grep -v "rpmsave"`; do
    %%{__rm} -f $default
    %%{__mv} -f $default.rpmsave $default
  done
  %%{__rm} -rf $BACKGROUNDS/waves
  %%{__mv} -f $BACKGROUNDS/waves.rpmsave $BACKGROUNDS/waves
  %%{__rm} -f $BACKGROUNDS/spin/waves.xml
fi
''',
      },
    },
  }),
  'CentOS': LocalsDict({
    '0': DEFAULT_INFO,
    '5': {
      'folder': 'c5',
      'start_color': (33, 85, 147),
      'end_color': (30, 81, 140),
    },
  }),
  'Fedora Core': LocalsDict({
    '0': DEFAULT_INFO,
    '6': {
      'folder': 'f6',
      'start_color': (0, 37, 77),
      'end_color': (0, 32, 68),
    },
  }),
  'Red Hat Enterprise Linux Server': LocalsDict({
    '0': DEFAULT_INFO,
  }),
  '*': LocalsDict({
    '0': DEFAULT_INFO,
  }),
}
